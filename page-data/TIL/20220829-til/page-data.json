{"componentChunkName":"component---src-templates-blog-post-js","path":"/TIL/20220829-til/","result":{"data":{"site":{"siteMetadata":{"title":"사진찍는 웹 개발자의 블로그","author":"Donghoon Song","siteUrl":"https://donghoon-song.github.io","comment":{"utterances":"donghoon-song/hoon-blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"5ca2481c-7141-5372-ab21-0d78b6909181","excerpt":"yarn berry는 어떤 문제를 해결해주는가? 비효율적인 의존성 검색 기존 : node_modules 선회 yarn berry : .pnp.cjs 사용 재현 가능성 기존 : npm은 패키지를 찾지 못하면 상위 디렉토리의 node_modules를 찾으므로, 상위 디렉토리 환경에 따라 달라짐. yarn berry : 의존성이 외부 환경에 영향을 받지 않음 의존성 설치 node_modules 필요없음. 같은 버전의 패키지 여러 번 설치되는거 방지 Zero-install…","html":"<h2 id=\"yarn-berry는-어떤-문제를-해결해주는가\" style=\"position:relative;\"><a href=\"#yarn-berry%EB%8A%94-%EC%96%B4%EB%96%A4-%EB%AC%B8%EC%A0%9C%EB%A5%BC-%ED%95%B4%EA%B2%B0%ED%95%B4%EC%A3%BC%EB%8A%94%EA%B0%80\" aria-label=\"yarn berry는 어떤 문제를 해결해주는가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>yarn berry는 어떤 문제를 해결해주는가?</h2>\n<ol>\n<li>비효율적인 의존성 검색\n<ul>\n<li>기존 : node_modules 선회</li>\n<li>yarn berry : .pnp.cjs 사용</li>\n</ul>\n</li>\n<li>재현 가능성\n<ul>\n<li>기존 : npm은 패키지를 찾지 못하면 상위 디렉토리의 node_modules를 찾으므로, 상위 디렉토리 환경에 따라 달라짐.</li>\n<li>yarn berry : 의존성이 외부 환경에 영향을 받지 않음</li>\n</ul>\n</li>\n<li>의존성 설치\n<ul>\n<li>node_modules 필요없음. 같은 버전의 패키지 여러 번 설치되는거 방지</li>\n<li>Zero-install을 사용하면 라이브러리를 설치 없이 사용 가능</li>\n</ul>\n</li>\n<li>의존성 관리\n<ul>\n<li>의존성을 끌어올리지 않으므로 유령 의존성 현상 방지</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"msw로-server-api-mocking-성공\" style=\"position:relative;\"><a href=\"#msw%EB%A1%9C-server-api-mocking-%EC%84%B1%EA%B3%B5\" aria-label=\"msw로 server api mocking 성공 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>msw로 server api mocking 성공</h2>\n<p>현재 cypress로 e2e test를 해보려고 함. api mocking에 <a href=\"https://docs.cypress.io/api/commands/intercept\">cy.intercept()</a>를 사용하거나 <a href=\"https://mswjs.io/\">msw</a>를 사용할 수 있지만 문제는 nuxt의 server side에서 부르는 api를 intercept하지 못함.\n이에 대해 검색해보면</p>\n<ol>\n<li><a href=\"https://velog.io/@developer_key/Cypress-SSR-API-intercept-%EC%B2%98%EB%A6%AC%EB%B2%95\">next.js 서버를 하나 더 만든다.</a> -> 실패\n<ul>\n<li>동시에 돌리니까 nuxt page가 렌더링되지 않음. (정확한 이유는 잘 모르겠음.)</li>\n<li>api mocking하자고 next.js, react 등을 설치해야 하는 문제.</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/cypress-io/cypress-mock-ssr\">cypress-mock-ssr</a>\n<ul>\n<li>아직 사용해보지 않음.</li>\n</ul>\n</li>\n<li><a href=\"https://blog.mathpresso.com/msw%EB%A1%9C-api-%EB%AA%A8%ED%82%B9%ED%95%98%EA%B8%B0-2d8a803c3d5c\">msw</a>\n<ul>\n<li>브라우저 환경에서만 동작하는 줄 알았는데 확장하여 node 환경에서 동작하는 모듈도 있음.</li>\n<li>이 방법으로 성공했고, 글 작성 예정.</li>\n</ul>\n</li>\n</ol>\n<p>참고</p>\n<ul>\n<li><a href=\"https://toss.tech/article/node-modules-and-yarn-berry\">https://toss.tech/article/node-modules-and-yarn-berry</a></li>\n</ul>","frontmatter":{"title":"20220829 TIL","date":"August 29, 2022"}}},"pageContext":{"slug":"/TIL/20220829-til/","previous":{"fields":{"slug":"/CI/CD/github-action으로-gatsby-블로그-github.io에-배포하기/"},"frontmatter":{"title":"github action으로 gatsby 블로그 github.io에 배포하기"}},"next":{"fields":{"slug":"/test/jest로-next-component-test하기/"},"frontmatter":{"title":"Jest로 next component test하기"}}}},"staticQueryHashes":["2486386679","3128451518"],"slicesMap":{}}