{"componentChunkName":"component---src-templates-blog-post-js","path":"/CI/CD/github-action으로-gatsby-블로그-github.io에-배포하기/","result":{"data":{"site":{"siteMetadata":{"title":"사진찍는 웹 개발자의 블로그","author":"Donghoon Song","siteUrl":"https://donghoon-song.github.io","comment":{"utterances":"donghoon-song/hoon-blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"1e703247-25d0-5387-8550-867cadb795d4","excerpt":"blog template을 바꾸면서 main branch에 merge하면 자동으로 배포될 수 있도록 설정하고 싶었습니다. 이를 지원하는 액션이 있을거라고 생각하고 검색해보았더니 아래의 액션을 발견했습니다. Gatsby Publish 기존 배포 명령어는 다음과 같았습니다. .github > workflows directory에 auto-deploy.yml 파일을 생성했습니다. ACCESS_TOKEN은 secrets에서 읽어오는데 아래 공식문서를 참고해 발급받으시고 repository…","html":"<p>blog template을 바꾸면서 main branch에 merge하면 자동으로 배포될 수 있도록 설정하고 싶었습니다. 이를 지원하는 액션이 있을거라고 생각하고 검색해보았더니 아래의 액션을 발견했습니다.</p>\n<p><a href=\"https://github.com/marketplace/actions/gatsby-publish\">Gatsby Publish</a></p>\n<p>기존 배포 명령어는 다음과 같았습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token string\">\"deploy\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master -r 'git@github.com:donghoon-song/donghoon-song.github.io.git'\"</span></code></pre></div>\n<p>.github > workflows directory에 auto-deploy.yml 파일을 생성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Gatsby Publish\n\n// main branch에 push할 때 실행\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> main\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> enriikke/gatsby<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>action@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">access-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          // 배포될 repository의 이름을 적습니다.\n          // 따로 명시하지 않으면 이 action이 실행되는 repository에 배포됩니다.\n          <span class=\"token key atrule\">deploy-repo</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'donghoon-song.github.io'</span>\n          // 배포될 branch를 적습니다.\n          // 따로 명시하지 않으면 'master' branch가 기본값입니다.\n          <span class=\"token key atrule\">deploy-branch</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'main'</span>\n</code></pre></div>\n<p>ACCESS_TOKEN은 secrets에서 읽어오는데 아래 공식문서를 참고해 발급받으시고 repository -> settings -> secrets에 추가해주시면 됩니다.</p>\n<p><a href=\"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token\">Creating a token</a></p>\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/32301380/184536260-469e201d-2304-434a-bf94-e35b2ba56d35.png\">","frontmatter":{"title":"github action으로 gatsby 블로그 github.io에 배포하기","date":"August 14, 2022"}}},"pageContext":{"slug":"/CI/CD/github-action으로-gatsby-블로그-github.io에-배포하기/","previous":{"fields":{"slug":"/javascript/lodash-collection-flatmapdeep-활용/"},"frontmatter":{"title":"lodash collection flatMapDeep 활용"}},"next":{"fields":{"slug":"/TIL/20220829-til/"},"frontmatter":{"title":"20220829 TIL"}}}},"staticQueryHashes":["2486386679","3128451518"],"slicesMap":{}}