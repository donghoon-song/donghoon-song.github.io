{"componentChunkName":"component---src-templates-blog-post-js","path":"/supabase/supabase-edge-function-빠르게-시작하기/","result":{"data":{"site":{"siteMetadata":{"title":"사진찍는 웹 개발자의 블로그","author":"Donghoon Song","siteUrl":"https://donghoon-song.github.io","comment":{"utterances":"donghoon-song/hoon-blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"c0899c54-db5a-568c-a90e-0d3d93ebe992","excerpt":"notion database에서 값을 가져오고 싶었는데 생각해보니, client단에서 notion api call을 하면 CORS 에러가 났다. 그래서 Proxy server가 필요했고, lambda로 만들까 하다가 생각해보니 supabase에 edge function이라는 기능이 있었다. 그래서 이것을 사용해 봤다! 처음에 무척 애를 먹었다. supabase cli 설치가 마음대로 안됐다. 결국 유튜브 동영상을 보고 명령어를 찾았다. 설치를 하고 함수 생성한 뒤 바로 배포했다. Edge…","html":"<p>notion database에서 값을 가져오고 싶었는데 생각해보니, client단에서 notion api call을 하면 CORS 에러가 났다. 그래서 Proxy server가 필요했고, lambda로 만들까 하다가 생각해보니 supabase에 edge function이라는 기능이 있었다. 그래서 이것을 사용해 봤다!</p>\n<p>처음에 무척 애를 먹었다. supabase cli 설치가 마음대로 안됐다. 결국 유튜브 동영상을 보고 명령어를 찾았다.</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe src=\"https://www.youtube.com/embed/rzglqRdZUQE\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen=\"\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> supabase/tap/supabase</code></pre></div>\n<p>설치를 하고 함수 생성한 뒤 바로 배포했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">supabase functions new notion-api-proxy\nsupabase functions deploy notion-api-proxy --project-ref <span class=\"token variable\">${PROJECT_REF}</span></code></pre></div>\n<p>Edge functions 대시보드에 들어가면 배포한 함수가 짜잔!\n<img width=\"1257\" alt=\"image\" src=\"https://user-images.githubusercontent.com/32301380/227210415-9630273f-16b4-47db-8c2e-e736aedf1bc1.png\"></p>\n<p>새로 생성한 함수는 functions directory 안에 들어 있다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/32301380/227208711-083c4de9-ca4b-4312-90a1-72864c44619b.png\" alt=\"image\"></p>\n<p>서버는 deno로 되어 있다. 와우. 한번도 안 써봤는데 잘 됐다.\n<img src=\"https://user-images.githubusercontent.com/32301380/227211674-d0a46324-edcf-4b2d-950d-c79132ab7116.png\" alt=\"image\"></p>\n<p>로컬로 돌려보기 위한 과정을 쭉 적어보면, docker가 필요했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> supabase functions serve notion-api-proxy\nError: cannot <span class=\"token builtin class-name\">read</span> config <span class=\"token keyword\">in</span> /Users/songdonghoon/study: <span class=\"token function\">open</span> supabase/config.toml: no such <span class=\"token function\">file</span> or directory\nHave you <span class=\"token builtin class-name\">set</span> up the project with supabase init?\n\n supabase init\nFinished supabase init.\n\n supabase functions serve notion-api-proxy\nError: supabase start is not running.\nTry rerunning the <span class=\"token builtin class-name\">command</span> with --debug to troubleshoot the error.\n\n supabase start\nError: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?\n  <span class=\"token keyword\">in</span> github.com/supabase/cli/internal/utils.AssertDockerIsRunning:48\n  <span class=\"token keyword\">in</span> github.com/supabase/cli/internal/start.Run:36\nTry rerunning the <span class=\"token builtin class-name\">command</span> with --debug to troubleshoot the error.\nStatus: Downloaded newer image <span class=\"token keyword\">for</span> public.ecr.aws/supabase/deno-relay:v1.6.0\nSeeding data supabase/seed.sql<span class=\"token punctuation\">..</span>.\nStarted supabase <span class=\"token builtin class-name\">local</span> development setup.\n\n         API URL: http://localhost:54321\n         <span class=\"token punctuation\">..</span>.\n\n supabase functions serve notion-api-proxy\nStarting supabase/functions/notion-api-proxy\nServing supabase/functions/notion-api-proxy\nWatcher Process started.\nCheck file:///home/deno/functions/notion-api-proxy/index.ts\nHello from Functions<span class=\"token operator\">!</span>\nListening on http://localhost:8000/</code></pre></div>\n<p>그리고 코드 아래에 있는 invoke 명령어를 사용하면 테스트 해볼 수 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl --request POST 'https://&lt;project_ref>.functions.supabase.co/hello-world' \\ --header 'Authorization: Bearer ANON_KEY' \\ --header 'Content-Type: application/json' \\ --data '{ \"name\":\"Functions\" }'</code></pre></div>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://supabase.com/docs/guides/functions/quickstart\">https://supabase.com/docs/guides/functions/quickstart</a></p>","frontmatter":{"title":"supabase edge function 빠르게 시작하기","date":"May 06, 2023"}}},"pageContext":{"slug":"/supabase/supabase-edge-function-빠르게-시작하기/","previous":{"fields":{"slug":"/mystory/셀프-브랜딩에서-가장-중요한-것/"},"frontmatter":{"title":"셀프 브랜딩에서 가장 중요한 것"}},"next":{"fields":{"slug":"/vue.js/vue-composition-api/"},"frontmatter":{"title":"vue composition api"}}}},"staticQueryHashes":["2486386679","3128451518"],"slicesMap":{}}