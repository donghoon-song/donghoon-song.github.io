{"componentChunkName":"component---src-templates-blog-post-js","path":"/aws/aws-waf-정리/","result":{"data":{"site":{"siteMetadata":{"title":"사진찍는 웹 개발자의 블로그","author":"Donghoon Song","siteUrl":"https://donghoon-song.github.io","comment":{"utterances":"donghoon-song/hoon-blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"bcccc4af-e64b-5b9f-ba89-c94165aed34f","excerpt":"WAF(Web Application Firewall) http(s) 요청을 모니터링하고 관리하는 방화벽\n규칙을 정하고 어떤 액션을 취할지 정의할 수 있음 액션 종류 허용(Allow) 차단(Block) 카운팅(Count) CAPTCHAR를 실행시키거나 사람인지, 브라우저인지 체크 WAF Rules 요청을 검사할 때 사용할 기준을 정하고 action을 적용할지 정함 ex) Bot이면 요청을 차단\nIP 주소 기준, 지역 기준 등 Actions Allow and Block actions…","html":"<h1 id=\"wafweb-application-firewall\" style=\"position:relative;\"><a href=\"#wafweb-application-firewall\" aria-label=\"wafweb application firewall permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WAF(Web Application Firewall)</h1>\n<p>http(s) 요청을 모니터링하고 관리하는 방화벽\n규칙을 정하고 어떤 액션을 취할지 정의할 수 있음</p>\n<h3 id=\"액션-종류\" style=\"position:relative;\"><a href=\"#%EC%95%A1%EC%85%98-%EC%A2%85%EB%A5%98\" aria-label=\"액션 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>액션 종류</h3>\n<ul>\n<li>허용(Allow)</li>\n<li>차단(Block)</li>\n<li>카운팅(Count)</li>\n<li>CAPTCHAR를 실행시키거나 사람인지, 브라우저인지 체크</li>\n</ul>\n<h2 id=\"waf-rules\" style=\"position:relative;\"><a href=\"#waf-rules\" aria-label=\"waf rules permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WAF Rules</h2>\n<ul>\n<li>요청을 검사할 때 사용할 기준을 정하고 action을 적용할지 정함</li>\n<li>ex) Bot이면 요청을 차단\nIP 주소 기준, 지역 기준 등</li>\n</ul>\n<h2 id=\"actions\" style=\"position:relative;\"><a href=\"#actions\" aria-label=\"actions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Actions</h2>\n<ul>\n<li>Allow and Block actions\n<ul>\n<li>terminating action</li>\n<li><code class=\"language-text\">terminate되면 그 후 다른 rule을 거치지 않는다.</code></li>\n</ul>\n</li>\n<li>Count action\n<ul>\n<li>non-terminating action</li>\n<li>WAS는 request를 count하고 다음 룰로 넘어간다.</li>\n</ul>\n</li>\n<li>CAPTCHA and Challenge\n<ul>\n<li>terminating or non-terminating action</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"rule-action-overriding\" style=\"position:relative;\"><a href=\"#rule-action-overriding\" aria-label=\"rule action overriding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rule action overriding</h2>\n<ul>\n<li>Allow\n<ul>\n<li>보호받는 자원으로 forward하기 전에 request에 custom header를 넣을 수 있다.</li>\n</ul>\n</li>\n<li>Block\n<ul>\n<li>status code 403</li>\n<li>rule을 통해 response도 커스터마이즈할 수 있다.</li>\n<li>block 당하면 block action setting이 설정한 response를 client에게 전송한다.</li>\n</ul>\n</li>\n<li>Count\n<ul>\n<li>남은 rule을 거친다.</li>\n<li>custom header를 request에 넣거나 label을 붙인다.</li>\n</ul>\n</li>\n<li>CAPTCHA and Challenge\n<ul>\n<li>CAPTCHA plzzle을 쓰거나</li>\n<li>silent challenge를 사용해 request가 bot인지 아닌지 체크한다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"overriding-the-rule-action-to-count\" style=\"position:relative;\"><a href=\"#overriding-the-rule-action-to-count\" aria-label=\"overriding the rule action to count permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overriding the rule action to Count</h3>\n<p>룰의 action을 Count로 overriding할 수 있다. 프로덕션에 룰을 적용하기전에 로그를 보면서 테스트, 모니터링하는데 주로 쓰임.</p>\n<h3 id=\"temporary-inconsistencies-during-updates\" style=\"position:relative;\"><a href=\"#temporary-inconsistencies-during-updates\" aria-label=\"temporary inconsistencies during updates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Temporary inconsistencies during updates</h3>\n<p>web ACL 생성 혹은 편집 시에 전 영역으로 퍼지는데 시간이 조금 걸리기 때문에 싱크 이슈가 있을 수 있다.</p>","frontmatter":{"title":"AWS WAF 정리","date":"May 06, 2023"}}},"pageContext":{"slug":"/aws/aws-waf-정리/","previous":{"fields":{"slug":"/test/how-browser-automation-works-behind-the-scenes---jsworld-2023/"},"frontmatter":{"title":"How browser automation works behind the scenes - JSWORLD 2023"}},"next":{"fields":{"slug":"/pwa/amplify-pwa-manifest:-line:-1,-column:-1,-syntax-error-해결법/"},"frontmatter":{"title":"Amplify pwa Manifest: Line: 1, column: 1, Syntax error 해결법"}}}},"staticQueryHashes":["2486386679","3128451518"],"slicesMap":{}}